<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="icon" href="./src/assests/Images/favicon.png" type="image/svg+xml" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <title>Twintik Avatar Experience</title>
    <style>
      :root {
        --color-primary-start: #7C3AED;
        --color-primary-end: #3B82F6;
        --color-accent: #FB923C;
        --color-text-dark: #1E293B;
        --color-text-light: #64748B;
        --color-bg-gradient-start: #F8FAFC;
        --color-bg-gradient-mid: #EEF2FF;
        --color-bg-gradient-end: #FCE7F3;
      }

      /* Keyframe Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      @keyframes pulse {
        0%, 100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.8;
          transform: scale(1.05);
        }
      }

      @keyframes gradient-shift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      @keyframes bounce {
        0%, 100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      @keyframes shimmer {
        0% {
          background-position: -1000px 0;
        }
        100% {
          background-position: 1000px 0;
        }
      }

      @keyframes slideInFromBottom {
        from {
          opacity: 0;
          transform: translateY(50px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      @keyframes scaleIn {
        from {
          opacity: 0;
          transform: scale(0.9);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* Respect reduced motion preferences */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* Global Micro-interactions */
      button, a, input, select {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      button:active {
        transform: scale(0.97);
      }

      /* Focus states for accessibility */
      *:focus-visible {
        outline: 3px solid var(--color-primary-start);
        outline-offset: 2px;
        border-radius: 4px;
      }

      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Selection color */
      ::selection {
        background: var(--color-primary-start);
        color: white;
      }

      /* Performance optimizations - Hardware acceleration */
      .welcome-content,
      .chat-bubble-window,
      .control-btn-small,
      .get-started-btn,
      .feature-item {
        will-change: transform;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
      }

      /* Optimize animations for performance */
      @media (hover: hover) and (pointer: fine) {
        button:hover,
        .feature-item:hover {
          will-change: transform;
        }
      }

      /* Skip animations on low-end devices */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-play-state: paused !important;
          transition: none !important;
        }
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        .welcome-content,
        .chat-bubble-window {
          border: 3px solid currentColor;
        }
      }

      /* Dark mode preferences (future-proofing) */
      @media (prefers-color-scheme: dark) {
        body {
          background: linear-gradient(135deg, #1E293B 0%, #334155 50%, #475569 100%);
        }
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        width: 100%;
        height: 100%;
        overflow-x: hidden;
        overflow-y: auto;
      }

      body {
        background: linear-gradient(135deg, var(--color-bg-gradient-start) 0%, var(--color-bg-gradient-mid) 50%, var(--color-bg-gradient-end) 100%);
        min-height: 100vh;
        width: 100%;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        margin: 0;
        padding: 0;
        line-height: 1.6;
        overflow-x: hidden;
        box-sizing: border-box;
        color: var(--color-text-dark);
      }

      .header-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem 2rem;
        background: transparent;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        z-index: 100;
      }

      .logo-container {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .twintik-logo {
        height: 40px;
        width: auto;
        transition: transform 0.3s ease;
      }

      .twintik-logo:hover {
        transform: scale(1.05);
      }

      .technocit-logo {
        height: 40px;
        width: auto;
        transition: transform 0.3s ease;
        transform: scale(1.8);
      }

      .technocit-logo:hover {
        transform: scale(1.9);
      }

      .technocit-logo-container {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-right: 1.5rem;
        padding: 0.75rem;
      }

      .technocit-logo-link {
        display: inline-block;
        text-decoration: none;
        border: none;
        outline: none;
      }

      .technocit-logo-link:hover,
      .technocit-logo-link:focus {
        text-decoration: none;
        border: none;
        outline: none;
      }


      .container {
        max-width: 100vw;
        margin: 0;
        padding: 0;
        width: 100vw;
      }

      .video-container {
        background: transparent;
        border-radius: 0;
        padding: 0;
        box-shadow: none;
        margin: 0;
        position: relative;
        overflow: hidden;
      }

      .video-container::before {
        display: none;
      }

      .icon-btn {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        border: none;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        padding: 0;
        position: relative;
        overflow: hidden;
      }

      .icon-btn::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        transform: scale(0);
        transition: transform 0.4s ease;
      }

      .icon-btn:hover::before {
        transform: scale(1);
      }

      .icon-btn:hover:not(:disabled) {
        transform: scale(1.15) rotate(5deg);
        box-shadow: 0 8px 25px rgba(30, 64, 175, 0.4);
      }

      .icon-btn:active:not(:disabled) {
        transform: scale(1.05);
      }

      .icon-btn:disabled {
        opacity: 0.3;
        cursor: not-allowed;
        filter: grayscale(0.5);
      }

      #startSession {
        background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(30, 64, 175, 0.3);
      }

      #endSession {
        background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
      }

      #speakButton {
        background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
        color: white;
        border: none;
        border-radius: 12px;
        padding: 0.875rem 1.75rem;
        font-weight: 600;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(30, 64, 175, 0.3);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        min-width: 120px;
        justify-content: center;
      }

      #speakButton:hover:not(:disabled) {
        background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(30, 64, 175, 0.4);
      }

      #speakButton:disabled {
        background: #e5e7eb;
        color: #9ca3af;
        cursor: not-allowed;
        opacity: 0.7;
      }

      #speakButton svg {
        width: 18px;
        height: 18px;
      }

      #userInput {
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        transition: all 0.3s ease;
        padding: 0.875rem 1.25rem;
        font-size: 1rem;
        background: #ffffff;
      }

      #userInput:focus {
        outline: none;
      }

      #userInput::placeholder {
        color: #9ca3af;
      }

      .session-controls {
        display: flex;
        gap: 1.5rem;
        align-items: center;
        justify-content: center;
        margin-bottom: 2rem;
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 20px;
        backdrop-filter: blur(10px);
      }


      #progressSection {
        margin-top: 1.5rem;
        padding: 1rem;
        background: rgba(30, 64, 175, 0.05);
        border-radius: 12px;
      }

      #progressBar {
        height: 6px !important;
        background: #e5e7eb !important;
        border-radius: 10px !important;
      }

      #progressFill {
        background: linear-gradient(90deg, #1e40af 0%, #3b82f6 100%) !important;
        border-radius: 10px !important;
        box-shadow: 0 0 10px rgba(30, 64, 175, 0.5);
      }

      #progressText {
        font-size: 0.875rem !important;
        color: #1e40af !important;
        font-weight: 600 !important;
      }

      #avatarVideo {
        width: 100%;
        max-width: 800px;
        border-radius: 16px;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
        background: #000;
      }

      section[role="group"] {
        display: flex;
        gap: 0.75rem;
        align-items: center;
        background: #ffffff;
        padding: 0.75rem;
        border-radius: 16px;
        border: 2px solid #e5e7eb;
        transition: all 0.3s ease;
      }

      section[role="group"]:focus-within {
        border-color: #3b82f6;
        background: #ffffff;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
      }

      section[role="group"] input {
        flex: 1;
        border: none !important;
        background: transparent !important;
        box-shadow: none !important;
        padding: 0.5rem 0.75rem !important;
      }

      section[role="group"] input:focus {
        border: none !important;
        background: transparent !important;
        box-shadow: none !important;
      }

      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      .processing {
        animation: pulse 1.5s ease-in-out infinite;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .loading-spinner {
        animation: spin 1s linear infinite;
      }

      /* Welcome Screen */
      .welcome-screen {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        padding: 0;
        padding-bottom: 80px;
        background: linear-gradient(135deg, #F8F9FA 0%, #E3E8EF 100%);
        position: relative;
        box-sizing: border-box;
        width: 100%;
        margin: 0;
      }

      .welcome-content {
        text-align: center;
        width: 100%;
        max-width: 800px;
        padding: 3rem 2rem 2rem 2rem;
        position: relative;
        z-index: 10;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin: auto;
        flex: 1;
      }

      .welcome-icon {
        font-size: 5rem;
        margin-bottom: 1.5rem;
        animation: bounce 2s infinite;
      }

      .welcome-title {
        font-size: 3rem;
        font-weight: 800;
        color: #1E293B;
        margin-bottom: 1rem;
        letter-spacing: -0.02em;
        line-height: 1.2;
      }

      .welcome-subtitle {
        font-size: 1.125rem;
        color: #64748B;
        line-height: 1.6;
        font-weight: 400;
        max-width: 650px;
        margin: 0 auto 2rem;
      }

      .feature-highlights {
        display: flex;
        justify-content: center;
        gap: 0.75rem;
        margin-bottom: 2rem;
        flex-wrap: nowrap;
      }

      .feature-highlights::-webkit-scrollbar {
        display: none;
      }

      .feature-highlights {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      .feature-item {
        display: flex;
        align-items: center;
        gap: 0.375rem;
        padding: 0.5rem 0.875rem;
        background: white;
        border-radius: 8px;
        border: 1px solid #E5E7EB;
        transition: all 0.3s ease;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        white-space: nowrap;
      }

      .feature-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        border-color: #3B82F6;
      }

      .feature-icon {
        font-size: 1.125rem;
      }

      .feature-item span {
        font-size: 0.8rem;
        font-weight: 600;
        color: #374151;
      }

      .get-started-btn {
        background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
        color: white;
        border: none;
        border-radius: 12px;
        padding: 1.125rem 2.5rem;
        font-size: 1.125rem;
        font-weight: 600;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
        transition: all 0.3s ease;
      }

      .get-started-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 32px rgba(59, 130, 246, 0.4);
        background: linear-gradient(135deg, #2563EB 0%, #1E40AF 100%);
      }

      .get-started-btn:active {
        transform: translateY(-1px);
      }

      .get-started-btn svg {
        transition: transform 0.3s ease;
      }

      .get-started-btn:hover svg {
        transform: translateX(4px);
      }

      /* Close Button */
      #endSession {
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        color: white;
        border: 2px solid #dc2626;
        border-radius: 12px;
        padding: 0.875rem 1.75rem;
        font-weight: 600;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        min-width: 120px;
        justify-content: center;
        box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
      }

      #endSession:hover {
        background: linear-gradient(135deg, #b91c1c 0%, #991b1b 100%);
        color: white;
        border-color: #b91c1c;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
      }

      #endSession svg {
        width: 18px;
        height: 18px;
        transition: transform 0.3s ease;
      }

      #endSession:hover svg {
        transform: rotate(90deg);
      }

      /* Controls Wrapper */
      .controls-wrapper {
        display: flex;
        flex-direction: column;
        gap: 0;
      }

      /* Voice Recording Card */
      .voice-recording-card {
        background: #ffffff;
        border-radius: 28px;
        padding: 4rem 3rem 3rem 3rem;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        margin-bottom: 0;
      }

      /* Text Input Card */
      .text-input-card {
        background: #ffffff;
        border-radius: 28px;
        padding: 3rem;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
      }

      /* Voice Recording Interface */
      .voice-recording-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 3rem;
        padding: 2rem;
        min-height: 140px;
      }

      .mic-button {
        width: 90px;
        height: 90px;
        border-radius: 50%;
        background: #2d2d2d;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 6px 24px rgba(0, 0, 0, 0.12);
        position: relative;
        flex-shrink: 0;
      }

      .mic-button::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        transform: scale(0);
        transition: transform 0.3s ease;
      }

      .mic-button:hover::before {
        transform: scale(1);
      }

      .mic-button:hover {
        transform: scale(1.05);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
      }

      .mic-button:active {
        transform: scale(0.98);
      }

      .mic-icon {
        width: 36px;
        height: 36px;
        fill: white;
        stroke: white;
        transition: all 0.3s ease;
      }

      .mic-button.recording {
        background: #ef4444;
        animation: micPulse 1.5s ease-in-out infinite;
      }

      .mic-button.recording .mic-icon {
        animation: micScale 1.5s ease-in-out infinite;
      }

      @keyframes micPulse {
        0%, 100% {
          box-shadow: 0 8px 30px rgba(239, 68, 68, 0.3);
        }
        50% {
          box-shadow: 0 8px 40px rgba(239, 68, 68, 0.6);
        }
      }

      @keyframes micScale {
        0%, 100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      /* Waveform Animation */
      .waveform-container {
        display: flex;
        align-items: center;
        gap: 5px;
        height: 70px;
        opacity: 0;
        transition: opacity 0.3s ease;
        flex: 1;
        max-width: 400px;
      }

      .waveform-container.active {
        opacity: 1;
      }

      .waveform-bar {
        width: 5px;
        height: 10px;
        background: linear-gradient(180deg, #2d2d2d 0%, #555 100%);
        border-radius: 4px;
        animation: waveform 1.2s ease-in-out infinite;
        flex: 1;
      }

      .waveform-bar:nth-child(1) { animation-delay: 0s; }
      .waveform-bar:nth-child(2) { animation-delay: 0.1s; }
      .waveform-bar:nth-child(3) { animation-delay: 0.2s; }
      .waveform-bar:nth-child(4) { animation-delay: 0.3s; }
      .waveform-bar:nth-child(5) { animation-delay: 0.4s; }
      .waveform-bar:nth-child(6) { animation-delay: 0.5s; }
      .waveform-bar:nth-child(7) { animation-delay: 0.6s; }
      .waveform-bar:nth-child(8) { animation-delay: 0.7s; }
      .waveform-bar:nth-child(9) { animation-delay: 0.8s; }
      .waveform-bar:nth-child(10) { animation-delay: 0.9s; }
      .waveform-bar:nth-child(11) { animation-delay: 1.0s; }
      .waveform-bar:nth-child(12) { animation-delay: 0.9s; }
      .waveform-bar:nth-child(13) { animation-delay: 0.8s; }
      .waveform-bar:nth-child(14) { animation-delay: 0.7s; }
      .waveform-bar:nth-child(15) { animation-delay: 0.6s; }
      .waveform-bar:nth-child(16) { animation-delay: 0.5s; }
      .waveform-bar:nth-child(17) { animation-delay: 0.4s; }
      .waveform-bar:nth-child(18) { animation-delay: 0.3s; }
      .waveform-bar:nth-child(19) { animation-delay: 0.2s; }
      .waveform-bar:nth-child(20) { animation-delay: 0.1s; }

      @keyframes waveform {
        0%, 100% {
          height: 10px;
        }
        50% {
          height: 55px;
        }
      }

      .recording-status {
        text-align: center;
        font-size: 0.9rem;
        color: #6b7280;
        min-height: 28px;
        margin-top: 1.5rem;
        font-weight: 500;
        letter-spacing: 0.3px;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes bounce {
        0%, 100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease;
      }

      /* Avatar Interface Styles - Full Screen Layout */
      .avatar-interface {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: linear-gradient(135deg, #1e3a8a 0%, #7c2d12 100%);
        display: flex;
        flex-direction: column;
        z-index: 1000;
        overflow: hidden;
        margin: 0;
        padding: 0;
      }

      .avatar-top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1001;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .avatar-logo img {
        height: 40px;
        width: auto;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        transition: transform 0.3s ease;
      }

      .avatar-logo img:hover {
        transform: scale(1.05);
      }

      .avatar-top-bar .technocit-logo {
        height: 40px;
        width: auto;
        transition: transform 0.3s ease;
        transform: scale(1.8);
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      .avatar-top-bar .technocit-logo:hover {
        transform: scale(1.9);
      }

      .avatar-top-bar .technocit-logo-container {
        margin-right: 1.5rem;
        padding: 0.75rem;
      }



       .avatar-main-content {
         flex: 1;
         display: flex;
         overflow: hidden;
         height: 100vh;
         margin: 0;
         padding: 0;
         transition: all 0.3s ease-in-out;
         width: 100vw;
         position: relative;
       }

       .avatar-main-content.chat-open {
         width: calc(100vw - 350px);
       }

      .avatar-video-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        position: relative;
        overflow: hidden;
        height: 100vh;
        width: 100%;
        background: linear-gradient(135deg, #1e3a8a 0%, #7c2d12 100%);
        justify-content: center;
        align-items: center;
        padding: 0;
        margin: 0;
        border: none;
      }

      .video-container {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        background: transparent;
        margin: 0;
        padding: 0;
        border: none;
        position: relative;
        animation: scaleIn 0.5s ease 0.3s both;
      }

      #avatarVideo {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 0;
        background: transparent;
        object-position: center;
        max-width: 100%;
        max-height: 100%;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      .current-subtitle {
        position: absolute;
        bottom: 60px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 1rem 2rem;
        font-size: 1rem;
        text-align: center;
        backdrop-filter: blur(10px);
        border-radius: 12px;
        max-width: 80%;
        max-height: 80px;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        line-height: 1.3;
        z-index: 1002;
      }


      .control-buttons {
        position: absolute;
        bottom: 20px;
        right: 20px;
        display: flex;
        gap: 12px;
        z-index: 1002;
        pointer-events: auto;
      }

      .control-btn-small {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        font-size: 1.25rem;
      }

      /* Chat button - White with blue icon */
      .control-btn-small:nth-child(1) {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(59, 130, 246, 0.3);
      }

      .control-btn-small:nth-child(1) i {
        color: #3B82F6;
      }

      .control-btn-small:nth-child(1):hover {
        background: rgba(255, 255, 255, 1);
        border-color: #3B82F6;
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
        transform: scale(1.1);
      }

      .control-btn-small:nth-child(1):hover i {
        color: #2563EB;
      }

      /* Mic button - White with red icon */
      .control-btn-small:nth-child(2) {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(239, 68, 68, 0.3);
      }

      .control-btn-small:nth-child(2) i {
        color: #EF4444;
      }

      .control-btn-small:nth-child(2):hover {
        background: rgba(255, 255, 255, 1);
        border-color: #EF4444;
        box-shadow: 0 6px 20px rgba(239, 68, 68, 0.3);
        transform: scale(1.1);
      }

      .control-btn-small:nth-child(2):hover i {
        color: #DC2626;
      }

      /* End button - White with gray icon */
      .control-btn-small:nth-child(3) {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(107, 114, 128, 0.3);
      }

      .control-btn-small:nth-child(3) i {
        color: #6B7280;
      }

      .control-btn-small:nth-child(3):hover {
        background: rgba(255, 255, 255, 1);
        border-color: #6B7280;
        box-shadow: 0 6px 20px rgba(107, 114, 128, 0.2);
        transform: scale(1.1);
      }

      .control-btn-small:nth-child(3):hover i {
        color: #4B5563;
      }

      .control-btn-small:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
      }

      .control-btn-small i {
        font-size: 18px;
        color: currentColor;
        transition: all 0.3s ease;
        display: block;
        line-height: 1;
        font-weight: 600;
      }

      .control-btn-small:hover i {
        transform: scale(1.1);
      }

      /* Smooth icon transitions */
      .control-btn-small i {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Special styling for end session button */
      #endSessionBtn:hover {
        background: rgba(239, 68, 68, 0.3);
        border-color: rgba(239, 68, 68, 0.5);
      }

      #endSessionBtn:hover i {
        color: #ef4444;
      }

      /* Specific button icon styling */
      #chatBtn i {
        color: #3b82f6;
      }

      #micBtn i {
        color: #ef4444; /* red to stand out on the background */
      }

      #endSessionBtn i {
        color: #ef4444;
      }

      /* Hover effects for each button */
      #chatBtn:hover {
        background: rgba(59, 130, 246, 0.3);
        border-color: rgba(59, 130, 246, 0.5);
      }

      #micBtn:hover {
        background: rgba(239, 68, 68, 0.2);
        border-color: rgba(239, 68, 68, 0.45);
      }

       .chat-sidebar {
         position: fixed;
         top: 0;
         right: 0;
         width: 350px;
         height: 100vh;
         background: #ffffff;
         border-left: 1px solid #e5e7eb;
         display: none; /* HIDDEN - Using floating bubble instead */
         flex-direction: column;
         margin: 0;
         padding: 0;
         border-radius: 0;
         overflow: hidden;
         transform: translateX(100%);
         transition: transform 0.3s ease-in-out;
         z-index: 1001;
         box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
       }

       .chat-sidebar.open {
         transform: translateX(0);
         display: none; /* Keep hidden even when open class is added */
       }

      .chat-header {
        padding: 1rem 1.5rem;
        border-bottom: 1px solid #e5e7eb;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #ffffff;
      }

      .chat-header-buttons {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .chat-header h3 {
        color: #1f2937;
        font-size: 1.1rem;
        font-weight: 600;
        margin: 0;
      }

       .clear-chat-btn, .close-chat-btn, .voice-mode-btn {
         background: #f3f4f6;
         color: #6b7280;
         border: 1px solid #e5e7eb;
         border-radius: 8px;
         padding: 0.5rem;
         cursor: pointer;
         transition: all 0.3s ease;
         display: flex;
         align-items: center;
         justify-content: center;
         gap: 0.5rem;
         min-width: 36px;
         min-height: 36px;
       }

       .close-chat-btn i {
         font-size: 16px;
         color: currentColor;
         transition: all 0.3s ease;
         line-height: 1;
       }

       .clear-chat-btn:hover, .close-chat-btn:hover, .voice-mode-btn:hover {
         background: #e5e7eb;
         transform: scale(1.05);
         color: #374151;
       }

       .voice-mode-btn:hover {
         background: #dcfce7;
         color: #16a34a;
         border-color: #bbf7d0;
       }

       .close-chat-btn:hover {
         background: #fef2f2;
         color: #dc2626;
         border-color: #fecaca;
       }

      .chat-messages {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        background: #F9FAFB;
      }

      .chat-messages .chat-message:first-child {
        margin-top: auto;
      }

      .chat-input-area {
        padding: 1rem;
        border-top: 1px solid #e5e7eb;
        background: #ffffff;
        display: flex;
        gap: 0.5rem;
        align-items: center;
        border-radius: 0;
        min-height: 60px;
        width: 100%;
        box-sizing: border-box;
      }

      .chat-input-area input {
        flex: 1;
        background: #ffffff;
        border: 2px solid #e5e7eb;
        border-radius: 25px;
        padding: 0.75rem 1.25rem;
        color: #1f2937 !important;
        font-size: 0.95rem;
        outline: none;
        transition: all 0.3s ease;
        min-height: 40px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        font-family: inherit;
        box-sizing: border-box;
        font-weight: 500;
        opacity: 1 !important;
        text-shadow: none;
      }

      .chat-input-area input:focus {
        background: #ffffff !important;
        border-color: #3b82f6;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        transform: translateY(-1px);
        color: #1f2937 !important;
        opacity: 1 !important;
      }

      .chat-input-area input::placeholder {
        color: #9ca3af;
        font-style: normal;
        font-weight: 400;
      }

      /* Ensure input text is always visible */
      .chat-input-area input[type="text"] {
        color: #1f2937 !important;
        -webkit-text-fill-color: #1f2937 !important;
        text-fill-color: #1f2937 !important;
      }

      .chat-input-area input[type="text"]:focus {
        color: #1f2937 !important;
        -webkit-text-fill-color: #1f2937 !important;
        text-fill-color: #1f2937 !important;
      }

      .chat-input-area .send-btn {
        background: #3b82f6 !important;
        color: white !important;
        border: none !important;
        border-radius: 50%;
        width: 32px !important;
        height: 32px !important;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        position: relative;
        overflow: hidden;
        opacity: 1 !important;
        padding: 0 !important;
        margin: 0 !important;
        min-width: auto !important;
        min-height: auto !important;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
      }

      .chat-input-area .send-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .chat-input-area .send-btn:hover {
        background: #2563eb !important;
        color: white !important;
        transform: scale(1.05);
        opacity: 1 !important;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      }

      .chat-input-area .send-btn:hover::before {
        opacity: 1;
      }

      .chat-input-area .send-btn:active {
        transform: scale(0.95);
        opacity: 0.9;
      }

      .chat-input-area .send-btn:disabled {
        background: #9ca3af !important;
        cursor: not-allowed;
        transform: none;
        opacity: 0.5 !important;
        color: white !important;
        box-shadow: none;
      }

      .chat-input-area .send-btn i {
        font-size: 14px;
        color: white;
        transition: all 0.3s ease;
        line-height: 1;
        position: relative;
        z-index: 1;
      }

      .chat-message {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        animation: fadeInUp 0.3s ease both;
        max-width: 85%;
      }

      .user-message {
        align-self: flex-end;
      }

      .bot-message {
        align-self: flex-start;
      }

       .message-content {
         background: #F3F4F6;
         color: #1F2937;
         padding: 0.75rem 1rem;
         border-radius: 12px;
         font-size: 0.9rem;
         line-height: 1.5;
         border: 1px solid #E5E7EB;
         box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
         white-space: pre-wrap;
         word-wrap: break-word;
         overflow-wrap: break-word;
         max-width: 100%;
       }

       .message-content p {
         margin: 0 0 0.5rem 0;
       }

       .message-content p:last-child {
         margin-bottom: 0;
       }

       .message-content strong {
         font-weight: 600;
       }

       .message-content a {
         color: #3B82F6;
         text-decoration: underline;
       }

       .message-content ul,
       .message-content ol {
         margin: 0.5rem 0;
         padding-left: 1.5rem;
       }

       .message-content li {
         margin: 0.25rem 0;
       }

       .message-content code {
         background: rgba(0, 0, 0, 0.05);
         padding: 0.125rem 0.375rem;
         border-radius: 4px;
         font-family: 'Courier New', monospace;
         font-size: 0.85rem;
       }

       .message-content pre {
         background: rgba(0, 0, 0, 0.05);
         padding: 0.75rem;
         border-radius: 6px;
         overflow-x: auto;
         margin: 0.5rem 0;
       }

       .message-content pre code {
         background: none;
         padding: 0;
       }

       .user-message .message-content {
         background: #3B82F6;
         color: white;
         border-color: #2563EB;
         box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
       }

       .user-message .message-content a {
         color: white;
         text-decoration: underline;
       }

       .user-message .message-content code {
         background: rgba(255, 255, 255, 0.2);
       }

       .user-message .message-content pre {
         background: rgba(255, 255, 255, 0.1);
       }

      .message-time {
        font-size: 0.7rem;
        color: #9CA3AF;
        margin-top: 0.25rem;
        font-weight: 400;
      }

      .user-message .message-time {
        text-align: right;
      }

      .bot-message .message-time {
        text-align: left;
      }

      /* Additional text formatting styles */
      .message-content h1,
      .message-content h2,
      .message-content h3 {
        margin: 0.5rem 0 0.25rem 0;
        font-weight: 600;
        line-height: 1.3;
      }

      .message-content h1 {
        font-size: 1.1rem;
      }

      .message-content h2 {
        font-size: 1rem;
      }

      .message-content h3 {
        font-size: 0.95rem;
      }

      .message-content blockquote {
        border-left: 3px solid #E5E7EB;
        padding-left: 0.75rem;
        margin: 0.5rem 0;
        font-style: italic;
        color: #6B7280;
      }

      .user-message .message-content blockquote {
        border-left-color: rgba(255, 255, 255, 0.5);
        color: rgba(255, 255, 255, 0.9);
      }

      /* ===== FLOATING CHAT BUBBLE WINDOW ===== */
      .chat-bubble-window {
        position: fixed;
        bottom: 100px;
        right: 30px;
        width: 360px;
        height: 500px;
        max-height: calc(100vh - 120px);
        background: white;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        display: none;
        flex-direction: column;
        z-index: 1400;
        overflow: hidden;
        transition: all 0.3s ease;
        transform: scale(0.95) translateY(20px);
        opacity: 0;
        border: 1px solid #E5E7EB;
      }

      .chat-bubble-window.open {
        display: flex;
        transform: scale(1) translateY(0);
        opacity: 1;
      }

      .chat-bubble-header {
        padding: 1rem 1.5rem;
        background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-shrink: 0;
      }

      .chat-bubble-header h3 {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 600;
        color: white;
      }

      .close-bubble-btn {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: none;
        border-radius: 50%;
        width: 32px;
        height: 32px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .close-bubble-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }

      .close-bubble-btn:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
      }

      .close-bubble-btn i {
        font-size: 14px;
      }

      .chat-bubble-messages {
        flex: 1;
        overflow-y: auto;
        padding: 1rem;
        background: #F5F5F5;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .chat-bubble-messages .chat-message:first-child {
        margin-top: auto;
      }

      .chat-bubble-messages::-webkit-scrollbar {
        width: 6px;
      }

      .chat-bubble-messages::-webkit-scrollbar-track {
        background: #E5E7EB;
      }

      .chat-bubble-messages::-webkit-scrollbar-thumb {
        background: #9CA3AF;
        border-radius: 3px;
      }

      .chat-bubble-messages::-webkit-scrollbar-thumb:hover {
        background: #6B7280;
      }

      .chat-bubble-input-area {
        padding: 1rem;
        background: white;
        border-top: 1px solid #E5E7EB;
        display: flex;
        gap: 0.5rem;
        align-items: center;
        flex-shrink: 0;
      }

      .chat-bubble-input-area input {
        flex: 1;
        background: #F9FAFB;
        border: 2px solid #E5E7EB;
        border-radius: 25px;
        padding: 0.75rem 1.25rem;
        color: #1F2937;
        font-size: 0.95rem;
        outline: none;
        transition: all 0.3s ease;
        font-family: inherit;
      }

      .chat-bubble-input-area input:focus {
        background: #FFFFFF;
        border-color: #3B82F6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .chat-bubble-input-area input::placeholder {
        color: #9CA3AF;
      }

      .send-bubble-btn {
        background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
      }

      .send-bubble-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      }

      .send-bubble-btn:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
      }

      .send-bubble-btn i {
        font-size: 16px;
        color: white;
      }

      .avatar-bottom-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1.5rem 2rem;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        gap: 1.5rem;
        margin: 0;
        border-radius: 0;
        height: auto;
        min-height: 70px;
        flex-shrink: 0;
        width: 100%;
        box-sizing: border-box;
      }

      .interaction-controls {
        display: flex;
        gap: 1rem;
        align-items: center;
        flex: 1;
        justify-content: flex-start;
      }

      .control-btn {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.875rem 1.75rem;
        border-radius: 25px;
        border: none;
        cursor: pointer;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        text-decoration: none;
        min-height: 44px;
      }

      .voice-btn {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: white;
        box-shadow: 0 2px 10px rgba(239, 68, 68, 0.3);
        /* Mobile-specific improvements */
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        /* Ensure minimum touch target size */
        min-width: 44px;
        min-height: 44px;
      }

      .voice-btn:hover {
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        transform: scale(1.05);
        box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
      }

      .voice-btn.recording {
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        animation: pulse 1.5s ease-in-out infinite;
        box-shadow: 0 4px 20px rgba(239, 68, 68, 0.6);
      }

      /* Mobile touch feedback */
      .voice-btn:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
      }

      /* Mobile-specific recording state */
      @media (max-width: 768px) {
        .voice-btn.recording {
          transform: scale(1.1);
          box-shadow: 0 6px 25px rgba(239, 68, 68, 0.8);
        }
      }

      .text-btn {
        background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        color: white;
        box-shadow: 0 2px 10px rgba(139, 92, 246, 0.3);
      }

      .text-btn:hover {
        background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
        transform: scale(1.05);
        box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
      }

      .text-input-area {
        display: flex;
        gap: 1rem;
        align-items: center;
        background: rgba(255, 255, 255, 0.15);
        padding: 0.75rem 1.25rem;
        border-radius: 25px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        flex: 1;
        max-width: 500px;
      }

      .text-input-area input {
        background: transparent;
        border: none;
        color: white;
        font-size: 1rem;
        outline: none;
        flex: 1;
        padding: 0.25rem 0;
      }

      .text-input-area input::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      .send-btn {
        background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        color: white;
        border: none;
        border-radius: 20px;
        padding: 0.5rem 1rem;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
      }

      .send-btn:hover {
        background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
        transform: scale(1.05);
        box-shadow: 0 3px 12px rgba(139, 92, 246, 0.4);
      }

       .close-btn {
         background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
         color: white;
         border: none;
         border-radius: 25px;
         padding: 0.875rem 1.75rem;
         cursor: pointer;
         font-weight: 600;
         transition: all 0.3s ease;
         display: flex;
         align-items: center;
         gap: 0.75rem;
         font-size: 0.9rem;
         min-height: 44px;
         box-shadow: 0 2px 10px rgba(107, 114, 128, 0.3);
         position: relative;
         overflow: hidden;
       }

       .close-btn::before {
         content: '';
         position: absolute;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
         opacity: 0;
         transition: opacity 0.3s ease;
       }

       .close-btn:hover {
         background: linear-gradient(135deg, #4b5563 0%, #374151 100%);
         transform: scale(1.05);
         box-shadow: 0 4px 15px rgba(107, 114, 128, 0.4);
       }

       .close-btn:hover::before {
         opacity: 1;
       }

       .close-btn:active {
         transform: scale(1.02);
       }


      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      .recording-status-avatar {
        position: absolute;
        bottom: 80px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(239, 68, 68, 0.9);
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        backdrop-filter: blur(15px);
        z-index: 1001;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        color: white;
        font-size: 0.9rem;
        font-weight: 600;
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 4px 20px rgba(239, 68, 68, 0.4);
        animation: recordingPulse 1.5s ease-in-out infinite;
      }

      @keyframes recordingPulse {
        0%, 100% {
          transform: translateX(-50%) scale(1);
          box-shadow: 0 4px 20px rgba(239, 68, 68, 0.4);
        }
        50% {
          transform: translateX(-50%) scale(1.05);
          box-shadow: 0 6px 25px rgba(239, 68, 68, 0.6);
        }
      }





      /* Responsive Design */
      @media (max-width: 1024px) {
        .chat-sidebar {
          width: 300px;
        }
      }

      @media (max-width: 768px) {
        .avatar-main-content {
          flex-direction: column;
        }

        .chat-sidebar {
          width: 100%;
          height: 200px;
          border-left: none;
          border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .avatar-bottom-bar {
          flex-direction: column;
          gap: 1rem;
          padding: 1rem;
        }

        .interaction-controls {
          gap: 1rem;
        }

        .control-btn {
          padding: 0.5rem 1rem;
          font-size: 0.8rem;
        }

        .text-input-area {
          max-width: 100%;
        }
      }

      /* ===== MOBILE OPTIMIZATION STYLES ===== */

      /* Safe Area Insets for iOS */
      .avatar-interface {
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
      }

      /* Toast Notification System */
      .toast {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        padding: 12px 24px;
        border-radius: 8px;
        background: rgba(0, 0, 0, 0.85);
        color: white;
        font-size: 14px;
        font-weight: 500;
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 10000;
        max-width: 90%;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }

      .toast.toast-error {
        background: rgba(220, 38, 38, 0.95);
      }

      .toast.toast-success {
        background: rgba(16, 185, 129, 0.95);
      }

      .toast.toast-info {
        background: rgba(59, 130, 246, 0.95);
      }

      /* Button Labels for Mobile */
      .btn-label {
        display: none;
        font-size: 10px;
        margin-top: 4px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      /* Flexible Video Sizing */
      .avatar-video-section {
        transition: height 0.3s ease;
      }

      .avatar-video-section.chat-active {
        height: 60vh;
      }

      /* Mobile-Specific Styles (768px) */
      @media (max-width: 768px) {
        /* Button Labels - Always Visible on Mobile */
        .control-btn-small {
          width: 64px;
          height: 64px;
          flex-direction: column;
          gap: 4px;
          padding: 8px;
        }

        .btn-label {
          display: block;
        }

        /* Chat Sidebar Push Behavior */
        .avatar-main-content {
          flex-direction: column;
          transition: all 0.3s ease;
        }

        .chat-sidebar {
          position: relative;
          width: 100%;
          height: 0;
          transform: none;
          transition: height 0.3s ease;
          border-left: none;
          border-top: 1px solid #e5e7eb;
          overflow: hidden;
        }

        .chat-sidebar.open {
          height: 40vh;
        }

        .avatar-video-section.chat-active {
          height: 60vh;
          flex-shrink: 0;
        }

        /* Touch Target Improvements */
        .chat-input-area input {
          padding: 1rem 1.25rem;
          font-size: 16px; /* Prevents zoom on iOS */
        }

        .chat-bubble-input-area input {
          padding: 0.875rem 1.125rem;
          font-size: 16px; /* Prevents zoom on iOS */
        }

        /* Larger send button on mobile */
        .send-bubble-btn {
          width: 48px;
          height: 48px;
          min-width: 48px;
          min-height: 48px;
        }

        .send-bubble-btn i {
          font-size: 18px;
        }

        .chat-message {
          padding: 0.5rem 0;
          max-width: 90%;
        }

        .message-content {
          padding: 1rem 1.25rem;
          font-size: 0.95rem;
          line-height: 1.6;
        }

        .chat-bubble-messages {
          gap: 1rem;
        }

        /* Welcome Screen Mobile Optimization */
        .welcome-content {
          padding: 1.5rem;
          max-width: 95%;
          margin: 1rem auto;
        }

        .welcome-icon {
          font-size: 4rem;
          margin-bottom: 1.5rem;
        }

        .welcome-title {
          font-size: 2.25rem;
          line-height: 1.2;
        }

        .welcome-subtitle {
          font-size: 1rem;
          max-width: 100%;
          margin-bottom: 2rem;
        }

        .feature-highlights {
          flex-direction: row;
          gap: 0.5rem;
          margin-bottom: 2rem;
          flex-wrap: nowrap;
          overflow-x: auto;
          justify-content: flex-start;
          padding: 0 0.5rem;
        }

        .feature-item {
          padding: 0.5rem 0.75rem;
          flex-shrink: 0;
        }

        .feature-icon {
          font-size: 1rem;
        }

        .feature-item span {
          font-size: 0.75rem;
        }

        .get-started-btn {
          padding: 1.125rem 2.5rem;
          font-size: 1rem;
          width: 100%;
          max-width: 320px;
        }

        /* Footer Mobile */
        .trust-footer {
          bottom: 10px;
        }

        .footer-text {
          font-size: 0.75rem;
        }


        /* Welcome Screen - Ensure no overlap with footer */
        .welcome-screen {
          padding-bottom: 90px;
        }

        .welcome-content {
          padding-bottom: 1rem;
        }

        /* Control Buttons Spacing */
        .control-buttons {
          gap: 12px;
          bottom: 18px;
          right: 18px;
        }

        /* Ensure minimum touch spacing */
        .feature-item {
          min-height: 48px;
        }

        .get-started-btn {
          min-height: 52px;
        }

        /* Bottom Bar Adjustments */
        .avatar-bottom-bar {
          padding: 1rem 1.5rem;
          min-height: 60px;
        }

        /* Toast Positioning for Mobile */
        .toast {
          bottom: calc(20px + env(safe-area-inset-bottom));
          max-width: 85%;
        }

        /* Floating Chat Bubble - Mobile */
        .chat-bubble-window {
          width: calc(100vw - 40px);
          max-width: 350px;
          height: 450px;
          max-height: calc(100vh - 130px);
          bottom: 110px;
          right: 20px;
        }

        /* Keep avatar full size - override old behavior */
        .avatar-video-section {
          height: 100vh !important;
        }

        .avatar-video-section.chat-active {
          height: 100vh !important;
        }
      }

      /* iPhone Pro Max Specific (428px) */
      @media (max-width: 428px) {
        /* Adaptive Button Sizing - Medium-Large */
        .control-btn-small {
          width: 60px;
          height: 60px;
          font-size: 16px;
        }

        .control-btn-small i {
          font-size: 16px;
        }

        /* Optimized Spacing */
        .control-buttons {
          gap: 10px;
          bottom: 18px;
        }

        /* Chat Bubble Positioning */
        .chat-bubble-window {
          bottom: 108px;
          max-height: calc(100vh - 128px);
        }
      }

      /* Small Phones (375px) - Larger Buttons */
      @media (max-width: 375px) {
        .control-btn-small {
          width: 68px;
          height: 68px;
          font-size: 18px;
        }

        .control-btn-small i {
          font-size: 18px;
        }

        .btn-label {
          font-size: 9px;
        }

        .control-buttons {
          gap: 8px;
          bottom: 15px;
        }

        .welcome-title {
          font-size: 2rem;
        }

        .get-started-btn {
          padding: 1rem 2rem;
          font-size: 0.95rem;
        }

        .chat-bubble-window {
          width: calc(100vw - 20px);
          height: 420px;
          max-height: calc(100vh - 125px);
          bottom: 105px;
          right: 10px;
          left: 10px;
        }

        .trust-footer {
          bottom: 5px;
        }
      }

      /* Tablets (769px - 1024px) */
      @media (min-width: 769px) and (max-width: 1024px) {
        .control-btn-small {
          width: 56px;
          height: 56px;
        }

        .chat-sidebar {
          width: 320px;
        }

        .avatar-video-section.chat-active {
          height: 70vh;
        }

        .chat-sidebar.open {
          height: 30vh;
        }

        .chat-bubble-window {
          width: 340px;
          height: 480px;
          max-height: calc(100vh - 115px);
          bottom: 95px;
        }
      }

      /* Landscape Mobile Optimization */
      @media (orientation: landscape) and (max-height: 430px) {
        /* Avatar stays full screen in landscape */
        .avatar-video-section {
          height: 100vh !important;
        }

        /* Hide sidebar - use floating chat bubble only */
        .chat-sidebar {
          display: none !important;
        }

        /* Keep controls in bottom-right corner */
        .control-buttons {
          bottom: 15px;
          right: 15px;
          gap: 10px;
        }

        /* Smaller buttons for landscape */
        .control-btn-small {
          width: 52px;
          height: 52px;
          font-size: 1rem;
        }

        .control-btn-small i {
          font-size: 16px;
        }

        /* Welcome screen landscape */
        .welcome-content {
          padding: 1rem 2rem;
        }

        .welcome-title {
          font-size: 2rem;
        }

        .welcome-subtitle {
          font-size: 0.95rem;
          margin-bottom: 1.5rem;
        }

        .feature-highlights {
          flex-direction: row;
          margin-bottom: 1.5rem;
          gap: 0.5rem;
        }

        .feature-item {
          padding: 0.375rem 0.625rem;
        }

        .feature-icon {
          font-size: 0.95rem;
        }

        .feature-item span {
          font-size: 0.7rem;
        }

        .get-started-btn {
          padding: 0.875rem 2rem;
          font-size: 1rem;
        }

        /* Chat Bubble in Landscape - Compact */
        .chat-bubble-window {
          width: 280px;
          height: 360px;
          max-height: calc(100vh - 105px);
          bottom: 85px;
          right: 15px;
        }

        /* Bottom bar in landscape */
        .avatar-bottom-bar {
          flex-direction: row;
          padding: 0.5rem 1rem;
          min-height: 45px;
        }
      }

      /* Desktop - Hide Button Labels */
      @media (min-width: 769px) {
        .btn-label {
          display: none;
        }

        /* Ensure proper spacing on desktop */
        .control-buttons {
          gap: 15px;
        }
      }

      /* Large Screens (>1024px) */
      @media (min-width: 1025px) {
        .chat-bubble-window {
          width: 380px;
          height: 550px;
          max-height: calc(100vh - 120px);
          bottom: 100px;
          right: 30px;
        }

        .control-buttons {
          bottom: 25px;
          right: 25px;
        }
      }

      /* Keyboard Open State - Applied via JavaScript */
      .avatar-video-section.keyboard-open {
        height: 40vh !important;
        transition: height 0.2s ease;
      }

      /* Footer */
      .trust-footer {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100;
        width: 100%;
        padding: 0 1rem;
      }

      .welcome-screen .trust-footer {
        position: absolute;
        bottom: 20px;
      }

      .footer-text {
        font-size: 0.875rem;
        color: #64748B;
        text-align: center;
        font-weight: 400;
      }


      /* Hide trust footer in avatar interface */
      #avatarInterface .trust-footer {
        display: none;
      }
    </style>
  </head>

  <body>
    <!-- Header with Logo -->
    <header class="header-bar">
      <div class="logo-container">
        <img src="https://twintik.com/images/logo.svg" alt="Twintik Logo" class="twintik-logo" />
      </div>
      <div class="technocit-logo-container">
        <a href="https://technocit.com" target="_blank" rel="noopener noreferrer" class="technocit-logo-link">
          <img src="https://technocit.com/wp-content/uploads/2024/05/Logo.svg" alt="TechnoCIT Logo" class="technocit-logo" />
        </a>
      </div>
    </header>

    <!-- Welcome Screen -->
    <div id="welcomeScreen" class="welcome-screen">
      <div class="welcome-content">
        <div class="welcome-icon"></div>
        <h1 class="welcome-title">Welcome to the Twintik Avatar Experience!</h1>
        <p class="welcome-subtitle">Meet Sandeep, Director of TechnoCIT, to answer your questions about us. Experience the future of human-AI interaction with our advanced avatar capabilities and interact with our intelligent virtual assistant.</p>
        <div class="feature-highlights">
          <div class="feature-item">
            <div class="feature-icon"></div>
            <span>Smart Conversations</span>
          </div>
          <div class="feature-item">
            <div class="feature-icon"></div>
            <span>Real-time Responses</span>
          </div>
          <div class="feature-item">
            <div class="feature-icon"></div>
            <span>Secure & Private</span>
          </div>
        </div>
        <button id="getStartedBtn" class="get-started-btn">
          <span>Interact with Sandeep's AI Twin</span>
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <!-- Footer -->
      <div class="trust-footer">
        <span class="footer-text"> Twintik 2025 | Powered by TechnoCIT</span>
      </div>
    </div>

    <!-- Avatar Interface (Hidden Initially) - Full Screen Layout -->
    <main id="avatarInterface" class="avatar-interface" style="display: none;">
      <!-- Top Bar with Logo and Language -->
      <div class="avatar-top-bar">
        <div class="avatar-logo">
          <img src="https://twintik.com/images/logo.svg" alt="Twintik Logo" class="twintik-logo" />
        </div>
        <div class="technocit-logo-container">
          <img src="https://technocit.com/wp-content/uploads/2024/05/Logo.svg" alt="TechnoCIT Logo" class="technocit-logo" />
        </div>
      </div>

      <!-- Main Content Area - Full Screen Avatar -->
      <div class="avatar-main-content">
        <!-- Avatar Video Section - Full Screen -->
        <div class="avatar-video-section">
          <div class="video-container">
            <video id="avatarVideo" autoplay playsinline></video>
          </div>

          <!-- Current Subtitle -->
          <!-- <div class="current-subtitle" id="avatarSubtitle">
            Hi! How can I assist you today?
          </div> -->


          <!-- Three Control Buttons -->
          <div class="control-buttons">
            <button class="control-btn-small" id="chatBtn" title="Chat">
              <i class="fas fa-comments"></i>
              <span class="btn-label">Chat</span>
            </button>
            <button class="control-btn-small" id="micBtn" title="Microphone">
              <i class="fas fa-microphone"></i>
              <span class="btn-label">Voice</span>
            </button>
            <button class="control-btn-small" id="endSessionBtn" title="End Session">
              <i class="fas fa-times"></i>
              <span class="btn-label">End</span>
            </button>
          </div>
        </div>

        <!-- Chat History Sidebar -->
        <div class="chat-sidebar">
           <div class="chat-header">
             <h3>Chat History</h3>
             <div class="chat-header-buttons">
               <button class="close-chat-btn" id="closeChatBtn" title="Close Chat">
                 <i class="fas fa-times"></i>
               </button>
             </div>
           </div>
          <div class="chat-messages" id="chatMessages">
            <div class="chat-message bot-message">
              <div class="message-content">
                Hi. Welcome to Twintik. Im Sandeep, The Director of TechnoCIT and Im here to answer any questions you have about us. You can use the Chat bubble below to type in your text or use the Mic Icon to talk to me directly.
              </div>
              <div class="message-time">Just now</div>
            </div>
          </div>

          <!-- Text Input Area - Now inside chat sidebar -->
          <div class="chat-input-area" id="textInputArea" style="display: none;">
            <input type="text" id="userInput" placeholder="Type your message..." />
            <button id="speakButton" class="send-btn" title="Send message">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>

        <!-- Floating Chat Bubble Window -->
        <div class="chat-bubble-window" id="chatBubbleWindow">
          <div class="chat-bubble-header">
            <h3>Chat History</h3>
            <button class="close-bubble-btn" id="closeBubbleBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="chat-bubble-messages" id="chatBubbleMessages">
            <!-- Messages will be added dynamically -->
          </div>
          <div class="chat-bubble-input-area">
            <input type="text" id="chatBubbleInput" placeholder="Type a message..." />
            <button class="send-bubble-btn" id="sendBubbleBtn">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Hidden Bottom Controls Bar (for functionality) -->
      <div class="avatar-bottom-bar" style="display: none;">
        <!-- Interaction Controls -->
        <div class="interaction-controls">
          <!-- Voice Recording Button -->
          <button id="recordButton" class="control-btn voice-btn" title="Hold to speak">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
              <line x1="12" x2="12" y1="19" y2="22" stroke="currentColor" stroke-width="2"/>
              <line x1="8" x2="16" y1="22" y2="22" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span>Hold to Speak</span>
          </button>

          <!-- Text Input Button -->
          <button id="textInputBtn" class="control-btn text-btn" title="Type a message">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
            <span>Type Message</span>
          </button>
        </div>

        <!-- Close Button -->
        <button class="close-btn" title="End Session" id="endSession">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 6L6 18M6 6L18 18"/>
          </svg>
          <span>End Session</span>
        </button>
      </div>

     </main>

     <!-- Recording status indicator - positioned near avatar -->
     <div id="recordingStatus" class="recording-status-avatar" style="display: none;"></div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
